!function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(t,e,i){"use strict";var n=this&&this.__awaiter||function(t,e,i,n){function r(t){return t instanceof i?t:new i(function(e){e(t)})}return new(i||(i=Promise))(function(i,o){function a(t){try{l(n.next(t))}catch(t){o(t)}}function s(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){t.done?i(t.value):r(t.value).then(a,s)}l((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,o=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(a=l.trys,!(a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=e.call(t,l)}catch(t){i=[6,t],o=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var r,o,a,s,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(e,"__esModule",{value:!0}),e.Global=void 0;var o=function(){function t(t){var e=this;if(void 0===t&&(t=!1),this.d=document,this.w=window,this.logOn=!1,this.isReady=!1,this.friendlyIframe=null,this.useIOViewability=!1,!t){var i=this.getIeVersion(navigator.userAgent);if((!!i||window.frameElement)&&void 0!==window.inDapIF&&window.inDapIF){this.log("FIF mode");var n=this.getTopWindow();this.w=n.currentWindow,this.d=this.w.document,this.friendlyIframe=n.currentFrame}}this.docReady(function(){return e.isReady=!0})}return t.prototype.addElement=function(t,e,i){var n=this.d.createElement(t);for(var r in i)i.hasOwnProperty(r)&&n.setAttribute(r,i[r]);return e.appendChild(n),n},t.prototype.addEvent=function(t,e,i){t&&e&&i&&(t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,i))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.logOn&&console.log(arguments)},t.prototype.docReady=function(t,e,i){var n=this;void 0===e&&(e=this.w),void 0===i&&(i=this.d);var r=function(){n.log("ready"),i.removeEventListener("DOMContentLoaded",r,!1),e.removeEventListener("load",r,!1),t()};"complete"===i.readyState?setTimeout(t):(i.addEventListener("DOMContentLoaded",r,!1),e.addEventListener("load",r,!1))},t.prototype.winReady=function(t,e,i){var n=this;void 0===e&&(e=this.w),void 0===i&&(i=this.d);var r=function(){n.log("window loaded"),e.removeEventListener("load",r,!1),t()};e.addEventListener("load",r,!1)},t.prototype.tracking=function(t){if(t){(new Image).src=t}},t.prototype.isChild=function(t,e){if(e)for(var i=e.parentNode;null!=i;){if(i===t)return!0;i=i.parentNode}return!1},t.prototype.getElementVisibility=function(t){var e=t.getBoundingClientRect(),i=(e.right-e.left)*(e.bottom-e.top);if(0===i)return 0;var n=Math.max(0,Math.min(e.bottom,this.w.innerHeight)-Math.max(0,e.top)),r=Math.max(0,Math.min(e.right,this.w.innerWidth)-Math.max(0,e.left));return Math.round(n*r*100/i)},t.prototype.checkTabVisibility=function(t,e){var i=this,n=function(){var t=["webkit","moz","ms","o"];if("hidden"in i.d)return"hidden";for(var e=0,n=t;e<n.length;e++){var r=n[e];if(r+"Hidden"in document)return r+"Hidden"}return null},r=function(){var t=n();return!!t&&i.d[t]},o=n();if(o){var a=o.replace(/[H|h]idden/,"")+"visibilitychange";this.addEvent(this.d,a,function(){r()?e():t()})}},t.prototype.getIosVersion=function(){if(/iP(hone|od|ad)/.test(navigator.platform)){var t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3]||"0",10)]}},t.prototype.isExternal=function(t,e){var i=this.getDomain(e);return-1===t.indexOf(i)},t.prototype.getDomain=function(t){var e=t;if(null!=t){var i=t.split(".").reverse();null!=i&&i.length>1&&(e=i[1]+"."+i[0])}return e},t.prototype.offsetTop=function(t){var e=0;do{isNaN(t.offsetTop)||(e+=t.offsetTop),t=t.offsetParent}while(t);return e},t.prototype.getPageHeight=function(){var t=this.d.body,e=this.d.documentElement;return Math.max(t.scrollHeight,t.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight)},t.prototype.getIeVersion=function(t){t=t||navigator.userAgent;var e=/\b(MSIE |Trident.*?rv:|Edge\/)(\d+)/.exec(t);return e?parseInt(e[2],10):void 0},t.prototype.offset=function(t){var e=t.getBoundingClientRect(),i=this.w.pageYOffset||this.d.documentElement.scrollTop;return{top:e.top+i,bottom:e.bottom+i,left:e.left,right:e.right}},t.prototype.removeElement=function(t){t&&t.parentNode.removeChild(t)},t.prototype.triggerCustomEvent=function(t,e,i,n){if(void 0===i&&(i=null),void 0===n&&(n={width:null,height:null}),t.length){var r;this.d.createEvent?(r=this.d.createEvent("HTMLEvents"),r.initEvent(t,!0,!0)):(r=this.d.createEventObject(),r.eventType=t),r.eventName=t,null!==i&&(r.videoDuration=i),null!==n.width&&null!==n.height&&(r.creativeSize=n),r.formatId=e,this.d.createEvent?this.w.dispatchEvent(r):this.w.fireEvent("on"+r.eventType,r)}},t.prototype.getTopWindow=function(){for(var t=5,e=window,i=this.getIeVersion(navigator.userAgent)?null:window.frameElement;t--;)try{e.parent&&e.parent.document&&(i=e.frameElement,(e=e.parent)===e.parent&&(t=0))}catch(t){this.log("getTopWindow error",t)}return{currentWindow:e,currentFrame:i}},t.prototype.isAMP=function(){return this.w.context?"AMP-AD"===this.w.context.tagName:this.w.name.indexOf('"tagName":"AMP-AD"')>-1},t.prototype.isMobile=function(){return"ontouchstart"in this.w},t.prototype.getJson=function(t){return n(this,void 0,void 0,function(){var e,i,n;return r(this,function(r){switch(r.label){case 0:return[4,fetch(t)];case 1:e=r.sent(),r.label=2;case 2:return r.trys.push([2,4,,5]),i=e,[4,e.json()];case 3:return i.parsedBody=r.sent(),[3,5];case 4:throw n=r.sent(),new Error("Smart Sitebar Template: JSON parsing error, "+n);case 5:if(!e.ok)throw new Error("Smart Sitebar Template: JSON parsing error, "+e.statusText);return[2,e]}})})},t}();e.Global=o},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.ViewabilityCore=void 0;var r=i(0),o=function(t){function e(){var e=t.call(this)||this;return e.counterId=0,e.hasFocus=!0,e.isSafeFrame=!1,e.isAMPFrame=!1,e.isAmpVisSub=!1,e.integration=0,e.timeCounter=0,e.resultLayer=null,e.playingCreativeId=-1,e.pixels={},e.threshold=[],e.elVis=0,e.isIOSupported=!1,e.IOCallbackCalled=!1,e.addEvent(e.w,"focus",function(){return e.hasFocus=!0}),e.addEvent(e.w,"blur",function(){return document.activeElement&&window.self===window.top?e.hasFocus=!0:e.hasFocus=!1}),e.addEvent(e.d,"visibilitychange",function(){e.d.hidden?e.hasFocus=!1:e.checkCurrentState()}),e}return n(e,t),e.prototype.videoHandler=function(t,e){var i=["start","AdStarted","AdPlaying","resume","play","playing"],n=["complete","skip","AdSkipped","AdStopped"];n.concat(["pause","AdPaused","abort","emptied","ended","error","seeked","seeking"]).indexOf(t)>-1?this.playingCreativeId=-1:i.indexOf(t)>-1&&(this.playingCreativeId=e,void 0!==this.intersectionObserverCallback&&0!==Object.keys(this.pixels).length&&this.intersectionObserverCallback(this.lastIntersectionObserverEntry)),n.indexOf(t)>-1&&this.executePixels(e,"notviewable")},e.prototype.updateCreativePixels=function(t,e){return this.log("updateCreativePixels"),this.IOCallbackCalled=!1,void 0!==this.intersectionObserverCallback&&this.intersectionObserverCallback(this.lastIntersectionObserverEntry),this.pixels[t]=e},e.prototype.start=function(t,e,i){var n=this;this.log("start",t,e,i),this.useIOViewability=!(null===i||void 0===i||!i.useIOViewability)&&i.useIOViewability,this.isIOSupported=this.isIntersectionObserverSupport();var r=this.checkElementStatus(t),o=r.measurable;if(t=r.element,this.pixels=e,!t)throw new Error('Smart Viewability: passed element to measure is not valid and its value is "'+t+'"');var a=this.mergeOptions(i,t);if(a.videoIntegration||(this.playingCreativeId=Object.keys(e)[0]?Number(Object.keys(e)[0]):1),this.integration=a.videoIntegration,a.logMessages&&(this.logOn=!0),a.testLayer&&(this.resultLayer=this.addInfoLayer()),i&&i.threshold){this.threshold=i.threshold;this.threshold.forEach(function(t,e){t.lastSent=0,"function"!=typeof t.aboveCallback&&(t.aboveCallback=function(){return console.log()}),"function"!=typeof t.belowCallback&&(t.belowCallback=function(){return console.log()})})}t.id||(t.id="sas_"+(new Date).getTime()+"rnd"),this.isIOSupported&&this.useIOViewability?this.initIntersactionObserver(t,a):this.counterId=this.w.setInterval(function(){return n.checkElement(t,a,o)},100),window.addEventListener("beforeunload",function(){n.executePixels(n.playingCreativeId,"notviewable")})},e.prototype.checkCurrentState=function(){this.hasFocus=!0,void 0===this.intersectionObserverCallback||this.IOCallbackCalled||this.intersectionObserverCallback(this.lastIntersectionObserverEntry)},e.prototype.initIntersactionObserver=function(t,e){var i,n,r=this;this.intersectionObserverCallback=function(o){r.lastIntersectionObserverEntry=o,o&&o.forEach(function(o){r.checkThreshold(100*o.intersectionRatio),100*o.intersectionRatio>=e.area&&r.playingCreativeId>-1?n=r.w.setTimeout(function(){r.hasFocus&&(r.IOCallbackCalled=!0,r.triggerViewableEvent(e),r.integration<2&&i.unobserve(t))},1e3*e.delay):clearTimeout(n)})};var o={threshold:e.area/100};this.hasFocus&&(i=new this.w.IntersectionObserver(this.intersectionObserverCallback,o),i.observe(t))},e.prototype.checkElement=function(t,e,i){if(this.log("checkElement",t,e),i||this.executePixels(this.playingCreativeId,"undetermined"),!this.d.getElementById(t.id))return window.clearInterval(this.counterId),void this.log("backup exit - in the meantime someone could remove / close the ad",t);this.isAMPFrame?this.w.context&&!this.isAmpVisSub&&this.subscribeAmpVis():this.isSafeFrame?this.elVis=Math.round(this.w.$sf.ext.inViewPercentage()):this.elVis=this.getVisibilityPercent(t,e),this.log("Element visibility "+this.elVis+"%"),this.playingCreativeId>-1&&this.hasFocus&&this.elVis>=e.area?++this.timeCounter>=10*e.delay&&this.triggerViewableEvent(e):this.timeCounter=0,this.checkThreshold(this.elVis)},e.prototype.triggerViewableEvent=function(t){this.log("Element visible more than "+t.area+"% for "+Math.round(this.timeCounter/10)+" seconds"),this.executePixels(this.playingCreativeId,"viewable"),this.executeViewCallback(t),t.testLayer&&(this.resultLayer.innerHTML="&#10004;")},e.prototype.executeViewCallback=function(t){t.viewCallback&&(t.viewCallback(),t.viewCallback=null,this.log("View callback function called"))},e.prototype.checkElementStatus=function(t){var e={measurable:!0,element:t};if(!t||window.self===window.top||this.w.self===this.w.top)return this.log("No iframe detected"),e;this.log("Iframe detected");var i=this.getTopWindow();return this.w=i.currentWindow,this.d=this.w.document,e.element=null===i.currentFrame?t:i.currentFrame,i.currentWindow.$sf&&i.currentWindow.$sf.ext?(this.log("SafeFrame detected"),e.element=e.element||t,this.isSafeFrame=!0):void 0!==window.inDapIF&&window.inDapIF?(this.log("Friendly iframe detected"),e.element=t):i.currentWindow===window.top?this.log("Secured iframe detected"):this.isAMP()?(this.log("AMP iframe detected"),this.isAMPFrame=!0):(this.log("Cross-domain iframe detected"),this.isIOSupported&&this.useIOViewability||(e.element=t,e.measurable=!1)),e},e.prototype.area=function(t){var e=t.getBoundingClientRect();return(e.right-e.left)*(e.bottom-e.top)},e.prototype.addInfoLayer=function(){var t=this.addElement("div",document.body,{id:"testLayer_"+Math.round(1e5*Math.random()),style:"width:60px;height:30px;position:fixed;top:0;right:0;background-color:yellow;\n\t\t\tcolor:blue;font-size:20px;text-align:center;padding-top:5px;z-index:99999;"});return t.innerHTML="0%",t},e.prototype.checkThreshold=function(t){for(var e=0,i=this.threshold;e<i.length;e++){var n=i[e];n.area>t&&n.lastSent<=0?(n.belowCallback(),n.lastSent=1):n.area<=t&&n.lastSent>=0&&(n.aboveCallback(),n.lastSent=-1)}},e.prototype.mergeOptions=function(t,e){var i={area:t&&t.area?t.area:50,testLayer:!(!t||!t.testLayer)&&t.testLayer,logMessages:!(!t||!t.logMessages)&&t.logMessages,videoIntegration:t&&t.videoIntegration?t.videoIntegration:0,threshold:t&&t.threshold?t.threshold:[],viewCallback:t&&t.viewCallback?t.viewCallback:null};return t&&t.delay?i.delay=t.delay:i.delay=i.videoIntegration?2:1,!this.isMobile()&&0===i.videoIntegration&&e.clientHeight*e.clientWidth>242500&&(i.area=30),i},e.prototype.executePixels=function(t,e){var i=!1;if(this.pixels[t]&&this.pixels[t][e]){for(var n=0,r=this.pixels[t][e];n<r.length;n++){var o=r[n];this.tracking(o)}i=!0,delete this.pixels[t],this.playingCreativeId=-1,this.integration<2&&this.w.clearInterval(this.counterId)}return this.isAmpVisSub&&this.ampListen(),i},e.prototype.getVisibilityPercent=function(t,e){var i=this.area(t);if(0===i)return 0;var n=t.getBoundingClientRect(),r=Math.max(0,Math.min(n.bottom,this.w.innerHeight)-Math.max(0,n.top)),o=Math.max(0,Math.min(n.right,this.w.innerWidth)-Math.max(0,n.left)),a=Math.round(r*o*100/i);return e.testLayer&&(n.top<0?(this.resultLayer.style.top="auto",this.resultLayer.style.bottom="0px"):(this.resultLayer.style.top="0px",this.resultLayer.style.bottom="auto"),this.resultLayer.innerHTML=a+"%"),a},e.prototype.subscribeAmpVis=function(){var t=this;this.isAmpVisSub=!0,this.ampListen=this.w.context.observeIntersection(function(e){e.forEach(function(e){t.elVis=100*e.intersectionRatio})})},e.prototype.isIntersectionObserverSupport=function(){return"IntersectionObserver"in this.w&&"IntersectionObserverEntry"in this.w},e}(r.Global);e.ViewabilityCore=o},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.Viewability=void 0;var r=i(1),o=function(t){function e(){return t.call(this)||this}return n(e,t),e.prototype.init=function(t,e,i){this.log("init"),this.start(t,e,i)},e}(r.ViewabilityCore);e.Viewability=o,window.Viewability=o}]);